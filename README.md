# 机票爬虫/api获取？

## 简介
本程序通过mqtt与国外一台vps上的Telegram bot 进行通信，可以使用手机进行远程控制。 如查价，监控机票。
机票价格来源于
1. 飞猪： 需要淘宝网登录的cookies，同一账号过于频繁查询会被封禁一段时间
2. 携程： 不限ip 需cookie
3. 京东:   限ip 不需cookie 可以使用https代理进行破解

程序中有获取http代理的api，来源于 github项目

## 环境
1. pymysql
2. paho_mqtt
3. requests

## 功能
1. 用户输入 如  **北京 上海 2019-01-01** 可获得当日最低价格的机票价格、航班、出发时间、到达时间、机场信息、城市信息等。
2. 用户输入 如  **北京 上海 2019-01-01 昆明航空XXXX** 指定获取此班航班信息
3. 1，2步也可以设置成监控，服务器每10-30分钟获取一次价格，与数据库中的已有价格比较，然后publish一个data，用tbbot后端subrices这个topic，获取data，即可以通过tgbot通知用户，机票价格有改变
4. 写了一个爬取最近30天机票价格的脚本，并自动入库，待以后分析用